# Specifications

We'll try to make the app as simple as possible but also not too simple so you'll see how larger apps should be created. It means we don't want to write/use any services like mail senders; however we want to implement at least a simple user management and save our data on the server. And we don't want to know anything about our users to mitigate problems with personal data.

## Entities and basic operations

> We should start with entities or user flows. The order depends on the expected app size, your domain knowledge and other factors. 
>
> In our case, it's easier to identify and describe WHAT we want to change (clients, projects, time entries, ..) than HOW we want to change them. We would probably start with user flows (HOW) when we already know complex business processes and we need to "support" them by our entities.

### Users

- Everybody can register a new account. No email or password would be required - the app generates a unique key that will be used to log in instead of a regular password.
- Logged users can delete their accounts.
- Logged users can see their unique ids (generated by the app).
- There will be a built-in super-user with ability to list users (their ids and the last login time) and remove user accounts.

### Clients

- Users can create new clients - all clients would have only one property - a name.
- Users can modify clients.
- Users can delete clients. It would also delete all dependent entities.

### Projects

- Users can create new projects - all projects would have only one property - a name.
- Users can modify clients.
- Users can delete projects. It would also delete all dependent entities.
- Each project has to be associated with the one client.

### Time Entries

- Users can create a new time entry only by start/stop mechanism.
- Users can modify time entries.
- Users can delete time entries.
- Each time entry has to be associated with the one project.
- Each time entry has these properties:
  - When it has been started.
  - When it has been stopped (optional). Only one time entry may have undefined stopped timestamp.
  - A title.

### Time Block

- Users can create new time blocks.
- Users can modify time blocks.
- Users can delete time blocks. It would also delete all dependent entities.
- Each time block has to be associated with the one client.
- Each time block has these properties:
  - Duration.
  - Is it billable?
  - Has it been paid? (If it's billable).

### Invoice

- Users can create new invoices.
- Users can modify invoices.
- Users can delete invoices.
- Each invoice has to be associated with the one time block.
- Eatch invoice has these properties:
  - Custom id - e.g. invoice variable symbol.
  - Link to the invoice (optional) - e.g. `https://an_invoice_service/invoices/xx.pdf`.

---

_Note_: 

These entities may or may not be represented in our code or database the same way:
   - `Time Entry` may be represented in the code by two structs: `IncompleteTimeEntry` and `CompleteTimeEntry`.
   - `Time Entry` could be just an anonymous list item in a `Project` field while you are saving it to your storage.

The entity list above is just a part of the first modeling phase and it should be simple/non-technical enough to discuss it with your clients.

P.S. I don't want to introduce any terminologies defined by [DDD](https://en.wikipedia.org/wiki/Domain-driven_design), databases, or [ORMs](https://blog.bitsrc.io/what-is-an-orm-and-why-you-should-use-it-b2b6f75f5e2a). Let's keep it simple and pragmatic. For instance, `Model` is always a Seed `Model`, not _domain model_ or _persistence model_ or anything else. Similarly, each `Entity` above could be either _entity_ or _value object_ in the context of DDD.

---


## Basic User Flows

> Let's describe only the basic user flows to get and idea how the user would use the app. The main goal is to create a foundation for our future sitemap and GUI design. Also user flows may help to discover major problems with our entities - especially if we forget to define some of them.

### Registration

1. User clicks the button `Register`.
1. The `Registration` page appears.
1. The user clicks the button `Create a new account`.
1. A new `Access Key` is generated.
1. User should save his access key in a secure location. The access key is available only at the time of registration.
1. User is redirected to the `Login` page.

### Login

1. User clicks the button `Login`.
1. The `Login` page appears.
1. User enters his access key.
1. User is automatically logged in - authentication process begins once the app detects input change and when the value length matches predefined key length.

### Logout

1. User clicks the button `Logout`.
1. User is logged out and redirected to the `Home` page.

### Manage Clients & Projects

1. User clicks the button `Clients & Projects`.
1. The page `Clients & Project` appears.
1. A list with clients and projects appears. Each Client has his Projects listed below itself.
1. All Clients and Projects are editable in-place.
1. There isn't a "save button". Everything is saved on blur or on action button click. Removing should be confirmed through the modal dialog box.

### Add Time Entry

1. User clicks the buttom `Time Tracker`.
1. The `Time Tracker` page appears.
1. User enters a time entry title.
1. User associates the time entry with the project.
1. User clicks the `Start` button to start the timer.
1. User observes changing timer (probably represented as `00:00:00`).
1. User click the `Stop` button.
1. The new time entry is prepended to the list with time entries.

### Add Time Block

1. User clicks `Time Blocks`.
1. The `Time Blocks` page appears.
1. A list with clients, projects, time statistics and time blocks appears.
1. User clicks `Add Time Block` button.
1. The default time block with the duration 20h is created.
1. User can edit the duration, mark the time block as billable and paid or attach the invoice.

### Remove User (as Super-User)

1. Super-User clicks `Users`.
1. The `Users` page appears.
1. A list with users appears.
1. Super-User clicks the `Remove` button assoicated with the chosen user.
1. Super-User confirms removing in the modal dialog box.

---

We may add more user flows, but I think it's enough and we can move to the next steps. Let's define technical requirements in the next chapter before we create a sitemap.










